<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>見積り依頼フォーム</title>
    <link rel="stylesheet" href="style_final.css">
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script src="env.js"></script>
</head>
<body>
    <div class="container">
        <!-- ヘッダー -->
        <header class="header">
            <h1>見積り依頼フォーム</h1>
            <div class="progress-container">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <div class="progress-text">
                <span id="current-step">1</span> / <span id="total-steps">4</span>
            </div>
        </header>

        <!-- ローディング画面 -->
        <div id="loading" class="loading">
            <div class="loading-spinner"></div>
        </div>

        <!-- エラー画面 -->
        <div id="error" class="error" style="display: none;">
            <h2>エラーが発生しました</h2>
            <div id="error-message" class="error-message"></div>
            <button class="retry-btn" onclick="location.reload()">再読み込み</button>
        </div>

        <!-- ステップ1: 質問フォーム -->
        <div id="step1" class="step">
            <div class="question-section">
                <h2 id="question-title" class="question-title">質問タイトル</h2>
                <p id="question-description" class="question-description">質問の説明</p>
                <div id="question-options" class="question-options">
                    <!-- 動的に生成される選択肢 -->
                </div>
            </div>
            
            <div class="navigation">
                <button id="prev-btn" class="nav-btn secondary" onclick="previousQuestion()" style="display: none;">前へ</button>
                <button id="next-btn" class="nav-btn" onclick="nextQuestion()" disabled>次へ</button>
            </div>
        </div>

        <!-- ステップ2: 概算見積り結果 -->
        <div id="step2" class="step" style="display: none;">
            <div class="estimate-section">
                <h2 class="question-title">概算見積り結果</h2>
                <div id="estimate-amount" class="estimate-amount">¥0</div>
                <div id="estimate-details" class="estimate-details">
                    <!-- 動的に生成される詳細 -->
                </div>
                <p style="color: #666; font-size: 14px; margin-top: 20px;">
                    ※この金額は概算です。正確な見積りは現地調査後にご提示いたします。
                </p>
            </div>
            
            <div class="navigation">
                <button class="nav-btn secondary" onclick="showStep(1)">質問に戻る</button>
                <button class="nav-btn" onclick="showStep(3)">詳細見積りを依頼</button>
            </div>
        </div>

        <!-- ステップ3: お客様情報入力 -->
        <div id="step3" class="step" style="display: none;">
            <div class="form-section">
                <h2 class="question-title">お客様情報入力</h2>
                
                <div class="form-group">
                    <label for="name">お名前 <span style="color: red;">*</span></label>
                    <input type="text" id="name" name="name" required placeholder="山田太郎">
                </div>
                
                <div class="form-group">
                    <label for="phone">電話番号 <span style="color: red;">*</span></label>
                    <input type="tel" id="phone" name="phone" required placeholder="09012345678">
                </div>
                
                <div class="form-group">
                    <label for="zipcode">郵便番号 <span style="color: red;">*</span></label>
                    <input type="number" id="zipcode" name="zipcode" pattern="[0-9]{7}" required placeholder="1234567">
                </div>
                
                <div class="form-group">
                    <label for="address1">住所 <span style="color: red;">*</span></label>
                    <input type="text" id="address1" name="address1" required placeholder="東京都渋谷区渋谷1-1-1">
                </div>
                
                <div class="form-group">
                    <label for="address2">番地等以降の住所</label>
                    <input type="text" id="address2" name="address2" placeholder="マンション名・部屋番号など">
                </div>
            </div>
            
            <div class="navigation">
                <button class="nav-btn secondary" onclick="showStep(2)">見積りに戻る</button>
                <button class="nav-btn" onclick="showStep(4)">写真アップロードへ</button>
            </div>
        </div>

        <!-- ステップ4: 写真アップロード -->
        <div id="step4" class="step" style="display: none;">
            <div class="photo-upload-section">
                <h2 class="question-title">写真アップロード</h2>
                <p class="question-description">建物の外観や気になる箇所の写真をアップロードしてください（最大10枚）</p>
                
                <div id="upload-area" class="upload-area">
                    <i>📷</i>
                    <div class="upload-text">写真をドラッグ&ドロップまたはクリックして選択</div>
                    <button type="button" id="camera-btn" class="camera-btn">📱 カメラ・アルバムから選択</button>
                </div>
                
                <input type="file" id="photo-input" accept="image/*" multiple capture="environment">
                
                <div id="photo-preview" class="photo-preview">
                    <!-- 動的に生成される写真プレビュー -->
                </div>
                
                <div class="submit-section">
                    <button id="submit-btn" class="submit-btn disabled" onclick="submitForm()" disabled>
                        写真をアップロードしてください
                    </button>
                </div>
            </div>
            
            <div class="navigation">
                <button class="nav-btn secondary" onclick="showStep(3)">お客様情報に戻る</button>
            </div>
        </div>

        <!-- ステップ5: 完了画面 -->
        <div id="step5" class="step" style="display: none;">
            <div class="completion-section">
                <div class="completion-icon">✅</div>
                <h2 class="completion-title">送信完了</h2>
                <div class="completion-message">
                    <p>見積り依頼を受け付けました。</p>
                    <p>担当者より3営業日以内にご連絡いたします。</p>
                    <p>ありがとうございました。</p>
                </div>
            </div>
        </div>
    </div>

    <script src="app_final.js"></script>
</body>
</html>
